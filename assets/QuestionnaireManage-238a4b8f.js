import{_ as I,r as l,u as N,a as j,b as r,o as f,c as g,d as o,F as C,e as M,f as t,w as i,n as T,t as c,g as x,p as $,h as z}from"./index-62637659.js";import{Q as F}from"./QuestionnarieService-82dc270a.js";const Q=u=>($("data-v-67b84b56"),u=u(),z(),u),R={class:"grid"},U={class:"col-12 md:col-12 xl:col-12"},A={class:"card"},E=Q(()=>o("div",{class:"text-900 text-xl font-semibold mb-3"},"資料夾",-1)),K={class:"grid"},O=["onClick"],H={class:"flex align-items-center"},J={class:"text-900 text-lg font-medium"},P={class:"text-600 text-lg font-semibold"},X={class:"card"},Y={class:"flex flex-wrap align-items-center justify-content-between gap-2"},Z=Q(()=>o("span",{class:"text-xl text-900 font-bold"},"自評表",-1)),ee={class:"flex align-items-center gap-3 mb-5"},te={class:"flex justify-content-end gap-2 mt-5"},oe={__name:"QuestionnaireManage",setup(u){const y=l([]),_=l([]),h=N();j();const p=l(!1);l([]),l([]);const S=l([]),d=l(null),m=new F;m.getQuestionnaireGroup().then(n=>y.value=n),m.getQuestionnaires("預設範本").then(n=>_.value=n),(()=>{m.getQuestionnaires("巡航自評表 - 範本").then(n=>{S.value=n})})();const w=n=>{m.getQuestionnaires(n).then(s=>{_.value=s})};w("巡航自評表 - 範本");const q=n=>{let s=[...new Set(n.map(b=>b.group))];return s?s.length:0},W=()=>{d&&h.push({path:"/backend/questionnaire-edit",query:{id:d.value,group:"巡航自評表 - 範本"}})},B=(n,s)=>{console.log(n),console.log(s),h.push({path:"/backend/questionnaire-edit",query:{id:n,group:s}})},D=[{label:"從範本新增自評表",command:()=>{p.value=!0}},{label:"新增空白自評表",command:()=>{h.push("/backend/questionnaire-edit")}}];return(n,s)=>{const b=r("SplitButton"),a=r("Column"),v=r("Button"),V=r("DataTable"),L=r("Dropdown"),G=r("Dialog");return f(),g(C,null,[o("div",R,[o("div",U,[o("div",A,[E,o("div",K,[(f(!0),g(C,null,M(y.value,(e,k)=>(f(),g("div",{key:k,class:"col-12 md:col-6 xl:col-4"},[o("div",{class:"p-3 border-1 surface-border flex align-items-center justify-content-between hover:surface-100 cursor-pointer border-round",onClick:ne=>w(e.name)},[o("div",H,[o("i",{class:T(["text-2xl mr-3",e.icon])},null,2),o("span",J,c(e.name),1)]),o("span",P,c(e.size),1)],8,O)]))),128))])]),o("div",X,[t(V,{value:_.value,dataKey:"id",paginator:"",rows:10},{header:i(()=>[o("div",Y,[Z,t(b,{label:"新增自評表",model:D})])]),default:i(()=>[t(a,{field:"group",header:"類別",sortable:"",headerStyle:{minWidth:"12rem"}}),t(a,{field:"name",header:"名稱",sortable:"",headerStyle:{minWidth:"15rem"}},{body:i(({data:e})=>[t(v,{link:"",alt:e.name,onClick:k=>B(e.id,e.group)},{default:i(()=>[x(c(e.name),1)]),_:2},1032,["alt","onClick"])]),_:1}),t(a,{field:"chapters",header:"章節數",sortable:"",headerStyle:{minWidth:"8rem"}},{body:i(({data:e})=>[x(c(q(e.questions)),1)]),_:1}),t(a,{field:"questions",header:"題目數",sortable:"",headerStyle:{minWidth:"8rem"}},{body:i(({data:e})=>[x(c(e.questions.length),1)]),_:1}),t(a,{field:"description",header:"描述",sortable:"",headerStyle:{minWidth:"12rem"}}),t(a,{field:"owner",header:"Owner",headerClass:"white-space-nowrap",headerStyle:{minWidth:"12rem"}}),t(a,{field:"create_date",header:"建立日期",sortable:"",headerStyle:{minWidth:"12rem"}}),t(a,{field:"create_date",header:"修改日期",sortable:"",headerStyle:{minWidth:"12rem"}})]),_:1},8,["value"])])])]),t(G,{visible:p.value,"onUpdate:visible":s[2]||(s[2]=e=>p.value=e),header:"選取範本",style:{width:"25rem"}},{default:i(()=>[o("div",ee,[t(L,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),options:S.value,optionLabel:"name",optionValue:"id",placeholder:"請選取範本",class:"flex-auto"},null,8,["modelValue","options"])]),o("div",te,[t(v,{type:"button",label:"取消",severity:"secondary",onClick:s[1]||(s[1]=e=>p.value=!1)}),t(v,{type:"button",label:"新增自評表",onClick:W,disabled:!d.value},null,8,["disabled"])])]),_:1},8,["visible"])],64)}}},ie=I(oe,[["__scopeId","data-v-67b84b56"]]);export{ie as default};
